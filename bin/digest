#!/usr/bin/env node

const cli = require('commander')
const util = require('util')
const digest = require(__dirname+'/../digest')


cli
  .version('0.0.1 ')
  .option('-C, --no-color', 'disable color')
  .option('-j, --json', 'output as json')
  .option('--list-skill-ids', 'list skill ids')
  .parse(process.argv)

const { color, listSkillIds } = cli
const inspect = object =>
  cli.json
    ? JSON.stringify(object, null, 2)
    : util.inspect(object, {
        depth: null,
        colors: color,
        maxArrayLength: null,
      })

digest()
  .then(digest => {
    if (listSkillIds){
      console.log(digest._skills.map(s => s.id).join("\n"))
    }else{
      console.log(inspect(digest))
    }
  })
  .catch(console.error)
